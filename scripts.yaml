bedroom_chromecast_on:
  alias: Bedroom Chromecast On
  sequence:
    - service: switch.turn_on
      data:
        entity_id: switch.bedroom_tv_power, switch.bedroom_speakers
bedroom_chromecast_off:
  alias: Bedroom Chromecast Off
  sequence:
    - service: media_player.turn_off
      data:
        entity_id: media_player.chromecast0856
    - service: switch.turn_off
      data:
        entity_id: switch.bedroom_tv_power, switch.bedroom_speakers
all_off:
  alias: All off
  sequence:
    - service: switch.turn_off
      data:
        entity_id: group.switch_lights
    - service: light.turn_off
      data:
        entity_id: group.all_lights
theather:
  alias: Theater Mode
  sequence:
    - service: script.all_off
bedtime:
  alias: Bedtime
  sequence:
    - delay:
        minutes: 30
    - service: script.bedroom_chromecast_off
    - service: script.all_off
automatic_light_toggle:
  alias: Automatic Light Toggle
  sequence:
    - service_template: >
        {% if is_state(entity_id, 'on') %}
          light.turn_off
        {% else %}
          script.automatic_light_on
        {% endif %}
      data_template:
        entity_id: "{{ entity_id }}"
automatic_light_on:
  alias: Automatic Light With Brightness
  sequence:
    - service: light.turn_on
      data_template:
        entity_id: "{{ entity_id }}"
        brightness_pct: >
         {% if is_state('sun.sun', 'below_horizon') %}
           {% if now().hour > 6 and now().hour < 23 %}
            30
           {% else %}
            1
           {% endif %}
         {% else %}
           100
         {% endif %}
three_tier_light:
  alias: Three Tier Xiaomi Light
  sequence:
    - service: light.turn_on
      data_template:
        entity_id: "{{ entity_id }}"
        brightness_pct: >
         {% if click == 'double' %}
           30
         {% elif click == 'triple' %}
           100
         {% elif click == 'quadruple' %}
           1
         {% endif %}
automatic_light_button:
  alias: Standard Xiaomi Button Light Controls
  sequence:
    - service_template: >
        {% if click == 'single'  %}
          script.automatic_light_toggle
        {% else %}
          script.three_tier_light
        {% endif %}
      data_template:
        entity_id: "{{ entity_id }}"
        click: "{{ click }}"
